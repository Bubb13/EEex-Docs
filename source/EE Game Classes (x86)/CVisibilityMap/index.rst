.. _CVisibilityMap Class:

==========================
CVisibilityMap Class
==========================

.. toctree::
   :maxdepth: 1

The structure used for this class is :ref:`CVisibilityMap<CVisibilityMap>`

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **Quick Ref**                                                                                                                                                                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| unsigned char **CVisibilityMap\:\:IsTileVisible**\(long nIndex)                                                                                                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| short **CVisibilityMap\:\:PointToTile**\(:ref:`CPoint<CPoint>`\& pos)                                                                                                                                                                   |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| unsigned char **CVisibilityMap\:\:GetVisibility**\(short nTile)                                                                                                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| unsigned char **CVisibilityMap\:\:IsTileExplored**\(long nIndex)                                                                                                                                                                        |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:CVisibilityMap**\()                                                                                                                                                                                            |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:~CVisibilityMap**\()                                                                                                                                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| unsigned char **CVisibilityMap\:\:AddCharacter**\(:ref:`CPoint<CPoint>`\& pos, long charId, const unsigned char\* pVisibleTerrainTable, unsigned char visualRange, long\* pRemovalTable)                                                |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:BuildTree**\(:ref:`CVisibilityMapTreeNode<CVisibilityMapTreeNode>`\* pTree, :ref:`CPoint<CPoint>`\* circlePoints, unsigned char radius)                                                                        |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:CalculateCirclePoints**\(:ref:`CPoint<CPoint>`\* circlePoints, unsigned char radius)                                                                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:CalculateEllipsePoints**\(unsigned char radius)                                                                                                                                                                |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:ClimbWall**\(:ref:`CPoint<CPoint>`\& ptStart, :ref:`CPoint<CPoint>`\& ptEnd, unsigned char charId, const unsigned char\* pVisibleTerrainTable, short nHighest)                                                 |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:DrawRayPoints**\(:ref:`CVisibilityMapTreeNode<CVisibilityMapTreeNode>`\* pTree, :ref:`CPoint<CPoint>` ptStart, unsigned char radius)                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| long **CVisibilityMap\:\:GetCharacterId**\(unsigned char nPos)                                                                                                                                                                          |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| unsigned char **CVisibilityMap\:\:GetSubTileCode**\(long nTile)                                                                                                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:GetTileCode**\(short n64x64Tile, TILE_CODE\& tileCode)                                                                                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:Init**\(:ref:`CGameArea<CGameArea>`\* pArea)                                                                                                                                                                   |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| int **CVisibilityMap\:\:IsCharacterIdOnMap**\(long charId)                                                                                                                                                                              |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:Marshal**\(unsigned char\*\* pData, unsigned long\* pnData)                                                                                                                                                    |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:PrivateAddCharacter**\(:ref:`CPoint<CPoint>`\& ptPos, unsigned char visId, const unsigned char\* pVisibleTerrainTable, unsigned char visualRange, long\* pRemovalTable)                                        |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:RemoveCharacter**\(:ref:`CPoint<CPoint>`\& ptOldPos, long charId, const unsigned char\* pVisibleTerrainTable, unsigned char visualRange, long\* pRemovalTable, unsigned char bRemoveCharId)                    |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:SetAreaExplored**\()                                                                                                                                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:SetAreaUnexplored**\()                                                                                                                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:SetTileVisible**\(long nIndex, unsigned char charId)                                                                                                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:TraverseTree**\(:ref:`CPoint<CPoint>` ptStart, :ref:`CPoint<CPoint>` ptInvert, unsigned char range, unsigned char charId, const unsigned char\* pVisibleTerrainTable)                                          |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:Uninit**\()                                                                                                                                                                                                    |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:Unmarshal**\(unsigned char\* pData, unsigned long nData)                                                                                                                                                       |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void **CVisibilityMap\:\:UpDate**\(:ref:`CPoint<CPoint>`\& ptOldPos, :ref:`CPoint<CPoint>`\& ptNewPos, long charId, unsigned char\* pVisibleTerrainTable, unsigned char visualRange, long\* pRemovalTable, unsigned char bForceUpdate)  |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| virtual void __cdecl **CVisibilityMap\:\:BltFogOWar3d**\(int x, int y, :ref:`CRect<CRect>`\& rClip, TILE_CODE\& tileCode, int w, int h, bool bVisibilty) = 0                                                                            |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| virtual unsigned char __cdecl **CVisibilityMap\:\:TileCodesEqual**\(TILE_CODE\& code1, TILE_CODE\& code2) = 0                                                                                                                           |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

