.. _CN Structures:

==========================
CN Structures
==========================

.. toctree::
   :maxdepth: 1


* :ref:`CNetwork<CNetwork>`
* :ref:`CNetworkConnectionSettings<CNetworkConnectionSettings>`
* :ref:`CNetworkWindow<CNetworkWindow>`


.. _CNetwork:

CNetwork
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Used by the :ref:`CNetwork Class<CNetwork Class>`

+------------+------------------------+---------------------------------------------------------------+------------------------------+
| **Offset** | **Size (Total: 3064)** | **Type**                                                      | **Field**                    |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x0        | 16                     | _GUID                                                         | m_nApplicationGuid           |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x10       | 1                      | unsigned __int8                                               | m_bApplicationGuidDefined    |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x11       | 1                      | unsigned __int8                                               | m_bAutoConnectCheck          |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x12       | 1                      | unsigned __int8                                               | m_bServiceProviderEnumerated |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x13       | 1                      | unsigned __int8                                               | m_bServiceProviderSelected   |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x14       | 4                      | int                                                           | m_nServiceProvider           |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x18       | 4                      | int                                                           | m_nTotalServiceProviders     |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 4                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x20       | 32                     | Array<:ref:`CString<CString>`,4>                              | m_ppszServiceProviderNames   |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x40       | 16                     | Array<DP_ProviderID,4>                                        | m_pnServiceProviderIDS       |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x50       | 1                      | unsigned __int8                                               | m_bConnectionInitialized     |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x51       | 1                      | unsigned __int8                                               | m_bSocketConnecting          |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x52       | 1                      | unsigned __int8                                               | m_bSocketConnected           |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 5                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x58       | 8                      | :ref:`CString<CString>`                                       | m_sIPAddress                 |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x60       | 1                      | unsigned __int8                                               | padding2                     |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 7                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x68       | 8                      | void*                                                         | m_lpDPAddress                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x70       | 4                      | unsigned int                                                  | m_dwDPAddressSize            |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 4                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x78       | 8                      | :ref:`CString<CString>`                                       | m_version                    |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x80       | 1                      | unsigned __int8                                               | m_bSessionSelected           |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 3                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x84       | 4                      | int                                                           | m_nSession                   |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x88       | 1                      | unsigned __int8                                               | m_bSessionNameToMake         |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x89       | 1                      | unsigned __int8                                               | padding3                     |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 6                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x90       | 8                      | :ref:`CString<CString>`                                       | m_sSessionNameToMake         |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x98       | 8                      | :ref:`CString<CString>`                                       | m_sSessionDescriptionToMake  |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xA0       | 1                      | unsigned __int8                                               | m_bSessionPasswordEnabled    |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xA1       | 1                      | unsigned __int8                                               | padding4                     |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 6                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xA8       | 8                      | :ref:`CString<CString>`                                       | m_sSessionPassword           |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xB0       | 1                      | unsigned __int8                                               | m_bAllowNewConnections       |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xB1       | 1                      | unsigned __int8                                               | m_bConnectionEstablished     |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xB2       | 1                      | unsigned __int8                                               | m_bIsHost                    |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 5                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xB8       | 120                    | DPWrapper                                                     | m_directPlay                 |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x130      | 4                      | int                                                           | m_nMaxPlayers                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x134      | 4                      | unsigned int                                                  | m_dwSessionFlags             |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x138      | 1                      | unsigned __int8                                               | m_bMaxPlayersDefined         |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x139      | 1                      | unsigned __int8                                               | m_bSessionOptionsDefined     |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 6                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x140      | 8                      | :ref:`CString<CString>`                                       | m_sJoinedGame                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x148      | 8                      | :ref:`CString<CString>`                                       | m_sLeftGame                  |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x150      | 8                      | :ref:`CString<CString>`                                       | m_sDroppedGame               |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x158      | 1                      | unsigned __int8                                               | m_bPlayerNameToMake          |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x159      | 1                      | unsigned __int8                                               | m_bPlayerCreated             |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 2                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x15C      | 4                      | int                                                           | m_idLocalPlayer              |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x160      | 8                      | :ref:`CString<CString>`                                       | m_sLocalPlayerName           |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x168      | 4                      | int                                                           | m_nTotalPlayers              |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 4                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x170      | 48                     | Array<:ref:`CString<CString>`,6>                              | m_psPlayerName               |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1A0      | 24                     | Array<int,6>                                                  | m_pPlayerID                  |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1B8      | 6                      | Array<unsigned __int8,6>                                      | m_pbPlayerVisible            |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1BE      | 6                      | Array<unsigned __int8,6>                                      | m_pbPlayerEnumerateFlag      |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1C4      | 4                      | int                                                           | m_nLocalPlayer               |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1C8      | 4                      | int                                                           | m_nHostPlayer                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 4                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1D0      | 8                      | :ref:`CString<CString>`                                       | m_sHostIPAddress             |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1D8      | 4                      | int                                                           | m_bAnnounceNewPlayers        |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 4                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x1E0      | 1296                   | Array<:ref:`CNetworkWindow<CNetworkWindow>`,6>                | m_pSlidingWindow             |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x6F0      | 216                    | :ref:`CNetworkWindow<CNetworkWindow>`                         | m_SystemWindow               |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0x7C8      | 1024                   | Array<unsigned int,256>                                       | m_dwCRC32                    |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xBC8      | 16                     | :ref:`CNetworkConnectionSettings<CNetworkConnectionSettings>` | m_connectionSettings         |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xBD8      | 4                      | unsigned int                                                  | m_lastMessageSentTime        |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
| 0xBDC      | 24                     | Array<unsigned int,6>                                         | m_lastMessageReceivedTime    |
+------------+------------------------+---------------------------------------------------------------+------------------------------+
|            | 4                      |                                                               | ``<padding>``                |
+------------+------------------------+---------------------------------------------------------------+------------------------------+


----

.. _CNetworkConnectionSettings:

CNetworkConnectionSettings
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------------------+-------------------------+--------------+
| **Offset** | **Size (Total: 16)** | **Type**                | **Field**    |
+------------+----------------------+-------------------------+--------------+
| 0x0        | 4                    | unsigned int            | dwFlags      |
+------------+----------------------+-------------------------+--------------+
| 0x4        | 4                    | unsigned int            | dwMaxPlayers |
+------------+----------------------+-------------------------+--------------+
| 0x8        | 8                    | :ref:`CString<CString>` | sPlayerName  |
+------------+----------------------+-------------------------+--------------+


----

.. _CNetworkWindow:

CNetworkWindow
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| **Offset** | **Size (Total: 216)** | **Type**                                                                                      | **Field**                |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x0        | 1                     | unsigned __int8                                                                               | m_bInitialized           |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x1        | 1                     | unsigned __int8                                                                               | m_bVSSent                |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x2        | 1                     | unsigned __int8                                                                               | m_bVSReceived            |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x3        | 1                     | unsigned __int8                                                                               | m_nPlayerNumber          |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x4        | 2                     | unsigned __int16                                                                              | m_nAckExpected           |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x6        | 2                     | unsigned __int16                                                                              | m_nNextFrameToSend       |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x8        | 2                     | unsigned __int16                                                                              | m_nFrameExpected         |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xA        | 2                     | unsigned __int16                                                                              | m_nTooFar                |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xC        | 2                     | unsigned __int16                                                                              | m_nOldestFrame           |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
|            | 2                     |                                                                                               | ``<padding>``            |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x10       | 24                    | Array<cnetworkwindow_queueentry_st,1>                                                         | m_pOutgoingBuffers       |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x28       | 24                    | Array<cnetworkwindow_queueentry_st,1>                                                         | m_pIncomingBuffers       |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x40       | 56                    | :ref:`CTypedPtrList<CTypedPtrList>`\<:ref:`CPtrList<CPtrList>`,cnetworkwindow_queueentry_st*> | m_lQueueIncomingMessages |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0x78       | 56                    | :ref:`CTypedPtrList<CTypedPtrList>`\<:ref:`CPtrList<CPtrList>`,cnetworkwindow_queueentry_st*> | m_lQueueOutgoingMessages |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xB0       | 1                     | Array<unsigned __int8,1>                                                                      | m_pbTimeOutSet           |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
|            | 3                     |                                                                                               | ``<padding>``            |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xB4       | 4                     | Array<unsigned int,1>                                                                         | m_pnTimeOut              |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xB8       | 1                     | Array<unsigned __int8,1>                                                                      | m_pbArrived              |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
|            | 1                     |                                                                                               | ``<padding>``            |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xBA       | 2                     | unsigned __int16                                                                              | m_nNumBuffered           |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xBC       | 1                     | unsigned __int8                                                                               | m_bNoNak                 |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xBD       | 1                     | unsigned __int8                                                                               | padding                  |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
|            | 2                     |                                                                                               | ``<padding>``            |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xC0       | 4                     | unsigned int                                                                                  | m_nPacketTimeout         |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xC4       | 4                     | unsigned int                                                                                  | m_nAckTimer              |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xC8       | 1                     | unsigned __int8                                                                               | m_bAckTimerSet           |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xC9       | 1                     | unsigned __int8                                                                               | m_bSomethingHappened     |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
|            | 2                     |                                                                                               | ``<padding>``            |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xCC       | 4                     | unsigned int                                                                                  | m_nNextEvent             |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xD0       | 4                     | unsigned int                                                                                  | m_nPlayerTimeout         |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+
| 0xD4       | 4                     | unsigned int                                                                                  | m_nNoMessageTimeout      |
+------------+-----------------------+-----------------------------------------------------------------------------------------------+--------------------------+

