.. _CW Structures:

==========================
CW Structures
==========================

.. toctree::
   :maxdepth: 1


* :ref:`CWarp<CWarp>`
* :ref:`CWeaponIdentification<CWeaponIdentification>`
* :ref:`CWeather<CWeather>`
* :ref:`CWildSurge<CWildSurge>`
* :ref:`CWnd<CWnd>`
* :ref:`CWorldMap<CWorldMap>`
* :ref:`CWorldMapArea<CWorldMapArea>`
* :ref:`CWorldMapData<CWorldMapData>`
* :ref:`CWorldMapFile<CWorldMapFile>`
* :ref:`CWorldMapHeader<CWorldMapHeader>`
* :ref:`CWorldMapLinks<CWorldMapLinks>`


.. _CWarp:

CWarp
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 4        | :ref:`CObject<CObject>`                | m_cObject                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x04       | 4        | :ref:`CWarp<CWarp>`\*                  | pLastEngine                   |
+------------+----------+----------------------------------------+-------------------------------+
| 0x08       | 28       | :ref:`CObList<CObList>`                | lTimers                       |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWarp            struct
     m_cObject      CObject <>
     pLastEngine    dd ? ; CWarp* 
     lTimers        CObList <>
   CWarp            ends


----

.. _CWeaponIdentification:

CWeaponIdentification
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 2        | unsigned short                         | m_itemType                    |
+------------+----------+----------------------------------------+-------------------------------+
|            | 2        |                                        | ``<padding>``                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x04       | 4        | unsigned long                          | m_itemFlags                   |
+------------+----------+----------------------------------------+-------------------------------+
| 0x08       | 4        | unsigned long                          | m_itemFlagMask                |
+------------+----------+----------------------------------------+-------------------------------+
| 0x0C       | 4        | unsigned long                          | m_attributes                  |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWeaponIdentification    struct
     m_itemType             dw ?
                            dw ? ; padding
     m_itemFlags            dd ?
     m_itemFlagMask         dd ?
     m_attributes           dd ?
   CWeaponIdentification    ends


----

.. _CWeather:

CWeather
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 1        | unsigned char                          | m_bOverCast                   |
+------------+----------+----------------------------------------+-------------------------------+
|            | 1        |                                        | ``<padding>``                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x02       | 2        | unsigned short                         | m_nLightningFreq              |
+------------+----------+----------------------------------------+-------------------------------+
| 0x04       | 2        | unsigned short                         | m_nCurrentWeather             |
+------------+----------+----------------------------------------+-------------------------------+
| 0x06       | 2        | unsigned short                         | m_nWeatherLevel               |
+------------+----------+----------------------------------------+-------------------------------+
| 0x08       | 4        | unsigned long                          | m_nWeatherEndTime             |
+------------+----------+----------------------------------------+-------------------------------+
| 0x0C       | 4        | unsigned long                          | m_nWeatherStageEndTime        |
+------------+----------+----------------------------------------+-------------------------------+
| 0x10       | 4        | unsigned long                          | m_nWeatherDuration            |
+------------+----------+----------------------------------------+-------------------------------+
| 0x14       | 4        | unsigned long                          | m_nLastTimeChecked            |
+------------+----------+----------------------------------------+-------------------------------+
| 0x18       | 2        | unsigned short                         | m_nWindLevel                  |
+------------+----------+----------------------------------------+-------------------------------+
|            | 2        |                                        | ``<padding>``                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x1C       | 4        | unsigned long                          | m_rgbCurrentOverCastColor     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x20       | 4        | unsigned long                          | m_nDurationCounter            |
+------------+----------+----------------------------------------+-------------------------------+
| 0x24       | 24       | :ref:`CSnowStorm<CSnowStorm>`          | m_snowStorm                   |
+------------+----------+----------------------------------------+-------------------------------+
| 0x3C       | 32       | :ref:`CRainStorm<CRainStorm>`          | m_rainStorm                   |
+------------+----------+----------------------------------------+-------------------------------+
| 0x5C       | 124      | :ref:`CFog<CFog>`                      | m_fog                         |
+------------+----------+----------------------------------------+-------------------------------+
| 0xD8       | 20       | :ref:`CSound<CSound>`                  | m_sndRain                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0xEC       | 20       | :ref:`CSound<CSound>`                  | m_sndWind                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x100      | 1        | unsigned char                          | m_bWindOn                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x101      | 1        | unsigned char                          | m_bUpgrading                  |
+------------+----------+----------------------------------------+-------------------------------+
|            | 2        |                                        | ``<padding>``                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x104      | 4        | unsigned long                          | m_nNextTimeToStartChecking    |
+------------+----------+----------------------------------------+-------------------------------+
| 0x108      | 4        | unsigned long                          | m_nWindVolumeLevel            |
+------------+----------+----------------------------------------+-------------------------------+
| 0x10C      | 4        | unsigned long                          | m_nRainVolumeLevel            |
+------------+----------+----------------------------------------+-------------------------------+
| 0x110      | 1        | unsigned char                          | m_bReInitialize               |
+------------+----------+----------------------------------------+-------------------------------+
|            | 3        |                                        | ``<padding>``                 |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWeather                     struct
     m_bOverCast                db ?
                                db ? ; padding
     m_nLightningFreq           dw ?
     m_nCurrentWeather          dw ?
     m_nWeatherLevel            dw ?
     m_nWeatherEndTime          dd ?
     m_nWeatherStageEndTime     dd ?
     m_nWeatherDuration         dd ?
     m_nLastTimeChecked         dd ?
     m_nWindLevel               dw ?
                                dw ? ; padding
     m_rgbCurrentOverCastColor  dd ?
     m_nDurationCounter         dd ?
     m_snowStorm                CSnowStorm <>
     m_rainStorm                CRainStorm <>
     m_fog                      CFog <>
     m_sndRain                  CSound <>
     m_sndWind                  CSound <>
     m_bWindOn                  db ?
     m_bUpgrading               db ?
                                db ? ; padding
                                db ? ; padding
     m_nNextTimeToStartChecking dd ?
     m_nWindVolumeLevel         dd ?
     m_nRainVolumeLevel         dd ?
     m_bReInitialize            db ?
                                db ? ; padding
                                db ? ; padding
                                db ? ; padding
   CWeather                     ends


----

.. _CWildSurge:

CWildSurge
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 2        | unsigned short                         | m_projectileOverride          |
+------------+----------+----------------------------------------+-------------------------------+
|            | 2        |                                        | ``<padding>``                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x04       | 4        | unsigned long                          | m_projectileSpeedMod          |
+------------+----------+----------------------------------------+-------------------------------+
| 0x08       | 4        | unsigned long                          | m_durationMod                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x0C       | 4        | unsigned long                          | m_levelMod                    |
+------------+----------+----------------------------------------+-------------------------------+
| 0x10       | 4        | unsigned long                          | m_bApplyEffects               |
+------------+----------+----------------------------------------+-------------------------------+
| 0x14       | 4        | long                                   | m_saveMod                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x18       | 4        | int                                    | m_bClearTargetRestriction     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x1C       | 4        | int                                    | m_bClearSelfRestriction       |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWildSurge                   struct
     m_projectileOverride       dw ?
                                dw ? ; padding
     m_projectileSpeedMod       dd ?
     m_durationMod              dd ?
     m_levelMod                 dd ?
     m_bApplyEffects            dd ?
     m_saveMod                  dd ?
     m_bClearTargetRestriction  dd ?
     m_bClearSelfRestriction    dd ?
   CWildSurge                   ends


----

.. _CWnd:

CWnd
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 4        | :ref:`CCmdTarget<CCmdTarget>`          | m_cCmdTarget                  |
+------------+----------+----------------------------------------+-------------------------------+
| 0x04       | 4        | HWND\*                                 | m_hWnd                        |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWnd             struct
     m_cCmdTarget   CCmdTarget <>
     m_hWnd         dd ? ; HWND*
   CWnd             ends


----

.. _CWorldMap:

CWorldMap
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+-------------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                                  | **Field**                     |
+------------+----------+-------------------------------------------+-------------------------------+
| 0x00       | 8        | :ref:`CResRef<CResRef>`                   | m_cResRef                     |
+------------+----------+-------------------------------------------+-------------------------------+
| 0x08       | 8        | :ref:`CWorldMapHeader<CWorldMapHeader>`   | m_cHeader                     |
+------------+----------+-------------------------------------------+-------------------------------+
| 0x10       | 4        | :ref:`CWorldMapData<CWorldMapData>`\*     | m_pData                       |
+------------+----------+-------------------------------------------+-------------------------------+
| 0x14       | 4        | :ref:`CWorldMapArea<CWorldMapArea>`\*\*   | m_ppAreas                     |
+------------+----------+-------------------------------------------+-------------------------------+
| 0x18       | 4        | :ref:`CWorldMapLinks<CWorldMapLinks>`\*\* | m_ppLinks                     |
+------------+----------+-------------------------------------------+-------------------------------+

Asm Definition

::

   CWorldMap    struct
     m_cResRef  CResRef <>
     m_cHeader  CWorldMapHeader <>
     m_pData    dd ? ; CWorldMapData* 
     m_ppAreas  dd ? ; CWorldMapArea** 
     m_ppLinks  dd ? ; CWorldMapLinks** 
   CWorldMap    ends


----

.. _CWorldMapArea:

CWorldMapArea
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 8        | unsigned char                          | m_resCurrentArea[8]           |
+------------+----------+----------------------------------------+-------------------------------+
| 0x08       | 8        | unsigned char                          | m_resOriginalArea[8]          |
+------------+----------+----------------------------------------+-------------------------------+
| 0x10       | 32       | char                                   | m_strName[32]                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x30       | 4        | unsigned long                          | m_dwFlags                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x34       | 4        | unsigned long                          | m_sequence                    |
+------------+----------+----------------------------------------+-------------------------------+
| 0x38       | 4        | unsigned long                          | m_mapLocationX                |
+------------+----------+----------------------------------------+-------------------------------+
| 0x3C       | 4        | unsigned long                          | m_mapLocationY                |
+------------+----------+----------------------------------------+-------------------------------+
| 0x40       | 4        | unsigned long                          | m_strLabel                    |
+------------+----------+----------------------------------------+-------------------------------+
| 0x44       | 4        | unsigned long                          | m_strAreaName                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x48       | 8        | unsigned char                          | m_resAreaLoadMosaic[8]        |
+------------+----------+----------------------------------------+-------------------------------+
| 0x50       | 4        | unsigned long                          | m_nNorthEdgeStartingLink      |
+------------+----------+----------------------------------------+-------------------------------+
| 0x54       | 4        | unsigned long                          | m_nNorthEdgeCount             |
+------------+----------+----------------------------------------+-------------------------------+
| 0x58       | 4        | unsigned long                          | m_nWestEdgeStartingLink       |
+------------+----------+----------------------------------------+-------------------------------+
| 0x5C       | 4        | unsigned long                          | m_nWestEdgeCount              |
+------------+----------+----------------------------------------+-------------------------------+
| 0x60       | 4        | unsigned long                          | m_nSouthEdgeStartingLink      |
+------------+----------+----------------------------------------+-------------------------------+
| 0x64       | 4        | unsigned long                          | m_nSouthEdgeCount             |
+------------+----------+----------------------------------------+-------------------------------+
| 0x68       | 4        | unsigned long                          | m_nEastEdgeStartingLink       |
+------------+----------+----------------------------------------+-------------------------------+
| 0x6C       | 4        | unsigned long                          | m_nEastEdgeCount              |
+------------+----------+----------------------------------------+-------------------------------+
| 0x70       | 128      | unsigned long                          | nUnused[32]                   |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWorldMapArea                struct
     m_resCurrentArea           db 8 dup (?)
     m_resOriginalArea          db 8 dup (?)
     m_strName                  db 32 dup (?)
     m_dwFlags                  dd ?
     m_sequence                 dd ?
     m_mapLocationX             dd ?
     m_mapLocationY             dd ?
     m_strLabel                 dd ?
     m_strAreaName              dd ?
     m_resAreaLoadMosaic        db 8 dup (?)
     m_nNorthEdgeStartingLink   dd ?
     m_nNorthEdgeCount          dd ?
     m_nWestEdgeStartingLink    dd ?
     m_nWestEdgeCount           dd ?
     m_nSouthEdgeStartingLink   dd ?
     m_nSouthEdgeCount          dd ?
     m_nEastEdgeStartingLink    dd ?
     m_nEastEdgeCount           dd ?
     nUnused                    dd 32 dup (?)
   CWorldMapArea                ends


----

.. _CWorldMapData:

CWorldMapData
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 8        | unsigned char                          | m_resMosaic[8]                |
+------------+----------+----------------------------------------+-------------------------------+
| 0x08       | 4        | unsigned long                          | m_nWidth                      |
+------------+----------+----------------------------------------+-------------------------------+
| 0x0C       | 4        | unsigned long                          | m_nHeight                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x10       | 4        | unsigned long                          | m_nMapID                      |
+------------+----------+----------------------------------------+-------------------------------+
| 0x14       | 4        | unsigned long                          | m_strTitle                    |
+------------+----------+----------------------------------------+-------------------------------+
| 0x18       | 4        | unsigned long                          | m_nStartCenteredOnX           |
+------------+----------+----------------------------------------+-------------------------------+
| 0x1C       | 4        | unsigned long                          | m_nStartCenteredOnY           |
+------------+----------+----------------------------------------+-------------------------------+
| 0x20       | 4        | unsigned long                          | m_nAreas                      |
+------------+----------+----------------------------------------+-------------------------------+
| 0x24       | 4        | unsigned long                          | m_nAreasOffset                |
+------------+----------+----------------------------------------+-------------------------------+
| 0x28       | 4        | unsigned long                          | m_nOffsetToLinks              |
+------------+----------+----------------------------------------+-------------------------------+
| 0x2C       | 4        | unsigned long                          | m_nLinks                      |
+------------+----------+----------------------------------------+-------------------------------+
| 0x30       | 8        | unsigned char                          | m_resAreaIcons[8]             |
+------------+----------+----------------------------------------+-------------------------------+
| 0x38       | 4        | unsigned long                          | m_dwFlags                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x3C       | 124      | unsigned long                          | nUnused[31]                   |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWorldMapData            struct
     m_resMosaic            db 8 dup (?)
     m_nWidth               dd ?
     m_nHeight              dd ?
     m_nMapID               dd ?
     m_strTitle             dd ?
     m_nStartCenteredOnX    dd ?
     m_nStartCenteredOnY    dd ?
     m_nAreas               dd ?
     m_nAreasOffset         dd ?
     m_nOffsetToLinks       dd ?
     m_nLinks               dd ?
     m_resAreaIcons         db 8 dup (?)
     m_dwFlags              dd ?
     nUnused                dd 31 dup (?)
   CWorldMapData            ends


----

.. _CWorldMapFile:

CWorldMapFile
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 12       | :ref:`CResHelper<CResHelper>`          | m_cResHelper                  |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWorldMapFile    struct
     m_cResHelper   CResHelper <>
   CWorldMapFile    ends


----

.. _CWorldMapHeader:

CWorldMapHeader
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 4        | unsigned long                          | m_nMapCount                   |
+------------+----------+----------------------------------------+-------------------------------+
| 0x04       | 4        | unsigned long                          | m_nMapOffset                  |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWorldMapHeader  struct
     m_nMapCount    dd ?
     m_nMapOffset   dd ?
   CWorldMapHeader  ends


----

.. _CWorldMapLinks:

CWorldMapLinks
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+----------+----------------------------------------+-------------------------------+
| **Offset** | **Size** | **Type**                               | **Field**                     |
+------------+----------+----------------------------------------+-------------------------------+
| 0x00       | 4        | unsigned long                          | m_nArea                       |
+------------+----------+----------------------------------------+-------------------------------+
| 0x04       | 32       | char                                   | m_entryPoint[32]              |
+------------+----------+----------------------------------------+-------------------------------+
| 0x24       | 4        | unsigned long                          | m_nDistanceScale              |
+------------+----------+----------------------------------------+-------------------------------+
| 0x28       | 4        | unsigned long                          | m_dwLinkFlags                 |
+------------+----------+----------------------------------------+-------------------------------+
| 0x2C       | 8        | unsigned char                          | m_resRandomEncounterArea0[8]  |
+------------+----------+----------------------------------------+-------------------------------+
| 0x34       | 8        | unsigned char                          | m_resRandomEncounterArea1[8]  |
+------------+----------+----------------------------------------+-------------------------------+
| 0x3C       | 8        | unsigned char                          | m_resRandomEncounterArea2[8]  |
+------------+----------+----------------------------------------+-------------------------------+
| 0x44       | 8        | unsigned char                          | m_resRandomEncounterArea3[8]  |
+------------+----------+----------------------------------------+-------------------------------+
| 0x4C       | 8        | unsigned char                          | m_resRandomEncounterArea4[8]  |
+------------+----------+----------------------------------------+-------------------------------+
| 0x54       | 4        | unsigned long                          | m_nEncounterProbability       |
+------------+----------+----------------------------------------+-------------------------------+
| 0x58       | 128      | unsigned long                          | nUnused[32]                   |
+------------+----------+----------------------------------------+-------------------------------+

Asm Definition

::

   CWorldMapLinks               struct
     m_nArea                    dd ?
     m_entryPoint               db 32 dup (?)
     m_nDistanceScale           dd ?
     m_dwLinkFlags              dd ?
     m_resRandomEncounterArea0  db 8 dup (?)
     m_resRandomEncounterArea1  db 8 dup (?)
     m_resRandomEncounterArea2  db 8 dup (?)
     m_resRandomEncounterArea3  db 8 dup (?)
     m_resRandomEncounterArea4  db 8 dup (?)
     m_nEncounterProbability    dd ?
     nUnused                    dd 32 dup (?)
   CWorldMapLinks               ends

